!function(){"use strict";function e(t){return e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},e(t)}function t(e,t){for(var o=0;o<t.length;o++){var r=t[o];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,n(r.key),r)}}function n(t){var n=function(t){if("object"!=e(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var o=n.call(t,"string");if("object"!=e(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==e(n)?n:n+""}var o=function(){return e=function e(t,n,o){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._name=t.name,this._link=t.link,this._cardSelector=n,this._handleCardClick=o},(n=[{key:"_getTemplate",value:function(){return document.querySelector(this._cardSelector).content.querySelector(".element").cloneNode(!0)}},{key:"generateCard",value:function(){var e=this;return this._element=this._getTemplate(),this._element.querySelector(".element__title").textContent=this._name,this._element.querySelector(".element__imagen").src=this._link,this._element.querySelector(".element__imagen").alt="Imagen de ".concat(this._name),this._element.querySelector(".element__icon-like").addEventListener("click",(function(e){e.target.classList.toggle("element__icon-like_active")})),this._element.querySelector(".element__icon-delete").addEventListener("click",(function(e){e.target.closest(".element").remove()})),this._element.querySelector(".element__popup-image").addEventListener("click",(function(){e._handleCardClick(e._link,e._name)})),this._element}}])&&t(e.prototype,n),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,n}();function r(e){return r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},r(e)}function i(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,u(o.key),o)}}function u(e){var t=function(e){if("object"!=r(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var n=t.call(e,"string");if("object"!=r(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==r(t)?t:t+""}var l=function(){return e=function e(t,n){var o=t.items,r=t.renderer;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._initialArray=o,this._renderer=r,this._container=n},(t=[{key:"renderItems",value:function(){var e=this;this._initialArray.forEach((function(t){e._renderer(t)}))}},{key:"addItem",value:function(e){this._container.append(e)}}])&&i(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,t}();function c(e){return c="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},c(e)}function a(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,f(o.key),o)}}function f(e){var t=function(e){if("object"!=c(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var n=t.call(e,"string");if("object"!=c(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==c(t)?t:t+""}var s=function(){return e=function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._popupSelector=t,this._buttonCloseProfile=this._popupSelector.querySelector("#profile"),this._overlayCloseProfile=this._popupSelector.querySelector("#overlay-formprofile"),this._buttonCloseCard=this._popupSelector.querySelector("#add"),this._overlayCloseCard=this._popupSelector.querySelector("#overlay-formcard")},(t=[{key:"open",value:function(){this._popupSelector.classList.add("popup__opened")}},{key:"close",value:function(){this._popupSelector.classList.remove("popup__opened")}},{key:"_handleEscClose",value:function(e){"Escape"===e.key&&this.close()}},{key:"setEventListeners",value:function(){var e=this;this._buttonCloseProfile&&this._buttonCloseProfile.addEventListener("click",(function(){e.close()})),this._overlayCloseProfile&&this._overlayCloseProfile.addEventListener("click",(function(){e.close()})),this._buttonCloseCard&&this._buttonCloseCard.addEventListener("click",(function(){e.close()})),this._overlayCloseCard&&this._overlayCloseCard.addEventListener("click",(function(){e.close()})),document.addEventListener("keydown",(function(t){e._handleEscClose(t)})),document.removeEventListener("keydown",(function(t){e._handleEscClose(t)}))}}])&&a(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,t}();function p(e){return p="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},p(e)}function y(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,m(o.key),o)}}function m(e){var t=function(e){if("object"!=p(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var n=t.call(e,"string");if("object"!=p(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==p(t)?t:t+""}function b(e,t,n){return t=_(t),function(e,t){if(t&&("object"==p(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,v()?Reflect.construct(t,n||[],_(e).constructor):t.apply(e,n))}function v(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(v=function(){return!!e})()}function d(e,t,n,o){var r=h(_(1&o?e.prototype:e),t,n);return 2&o&&"function"==typeof r?function(e){return r.apply(n,e)}:r}function h(){return h="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,n){var o=function(e,t){for(;!{}.hasOwnProperty.call(e,t)&&null!==(e=_(e)););return e}(e,t);if(o){var r=Object.getOwnPropertyDescriptor(o,t);return r.get?r.get.call(arguments.length<3?e:n):r.value}},h.apply(null,arguments)}function _(e){return _=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},_(e)}function S(e,t){return S=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},S(e,t)}var w=function(e){function t(e){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(n=b(this,t,[e]))._linkPopupImagen=n._popupSelector.querySelector(".popup__body-imagen"),n._leyendaPopupTitle=n._popupSelector.querySelector(".popup__body-title"),n._closePopupBtnImage=n._popupSelector.querySelector("#imagen"),n._closePopupOverlay=n._popupSelector.querySelector("#overlay-card"),n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&S(e,t)}(t,e),n=t,(o=[{key:"_handleEscClose",value:function(e){d(t,"_handleEscClose",this,3)([e])}},{key:"open",value:function(e,n){this._linkPopupImagen.src=e,this._leyendaPopupTitle.textContent=n,this._linkPopupImagen.alt="Imagen de ".concat(n),d(t,"open",this,3)([])}},{key:"close",value:function(){d(t,"close",this,3)([])}},{key:"setEventListeners",value:function(){var e=this;this._closePopupBtnImage&&this._closePopupBtnImage.addEventListener("click",(function(){e.close()})),this._closePopupOverlay&&this._closePopupOverlay.addEventListener("click",(function(){e.close()})),document.addEventListener("keydown",(function(t){e._handleEscClose(t)})),document.removeEventListener("keydown",(function(t){e._handleEscClose(t)}))}}])&&y(n.prototype,o),Object.defineProperty(n,"prototype",{writable:!1}),n;var n,o}(s);function g(e){return g="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},g(e)}function k(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,E(o.key),o)}}function E(e){var t=function(e){if("object"!=g(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var n=t.call(e,"string");if("object"!=g(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==g(t)?t:t+""}function P(e,t,n){return t=O(t),function(e,t){if(t&&("object"==g(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,j()?Reflect.construct(t,n||[],O(e).constructor):t.apply(e,n))}function j(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(j=function(){return!!e})()}function C(){return C="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,n){var o=function(e,t){for(;!{}.hasOwnProperty.call(e,t)&&null!==(e=O(e)););return e}(e,t);if(o){var r=Object.getOwnPropertyDescriptor(o,t);return r.get?r.get.call(arguments.length<3?e:n):r.value}},C.apply(null,arguments)}function O(e){return O=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},O(e)}function x(e,t){return x=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},x(e,t)}var L=function(e){function t(e,n){var o;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(o=P(this,t,[e]))._handleFormSubmit=n,o._inputList=o._popupSelector.querySelectorAll(".form__input"),o._contentPopupFormCard=o._popupSelector.closest(".popup-content-add-card"),o}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&x(e,t)}(t,e),n=t,o=[{key:"close",value:function(){this._contentPopupFormCard.classList.remove("popup__opened"),this._popupSelector.reset()}},{key:"_getInputValues",value:function(){var e={};return this._inputList.forEach((function(t){e[t.id]=t.value})),console.log("Valores del formulario:",e),e}},{key:"setEventListeners",value:function(){var e,n,o,r=this;(e=t,n=this,"function"==typeof(o=C(O(1&3?e.prototype:e),"setEventListeners",n))?function(e){return o.apply(n,e)}:o)([]),this._popupSelector.addEventListener("submit",(function(e){e.preventDefault(),r._handleFormSubmit(r._getInputValues()),r.close()}))}}],o&&k(n.prototype,o),Object.defineProperty(n,"prototype",{writable:!1}),n;var n,o}(s);function q(e){return q="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},q(e)}function T(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,M(o.key),o)}}function M(e){var t=function(e){if("object"!=q(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var n=t.call(e,"string");if("object"!=q(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==q(t)?t:t+""}var B={inputSelector:".form__input",submitButtonSelector:".popup__add-btn",inactiveButtonClass:"popup__add-btn_inactive"},I=function(){return e=function e(t,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._forms=t,this._formElement=n,this._inputList=Array.from(this._formElement.querySelectorAll(this._forms.inputSelector)),this._buttonElement=this._formElement.querySelector(this._forms.submitButtonSelector)},(t=[{key:"_hasInvalidInput",value:function(){return this._inputList.some((function(e){return!e.validity.valid}))}},{key:"_toggleButtonState",value:function(){this._hasInvalidInput()?(this._buttonElement.classList.add(this._forms.inactiveButtonClass),this._buttonElement.disabled=!0):(this._buttonElement.classList.remove(this._forms.inactiveButtonClass),this._buttonElement.disabled=!1)}},{key:"enableValidation",value:function(){var e=this;this._inputList.forEach((function(t){t.addEventListener("input",(function(){e._toggleButtonState()}))})),this._toggleButtonState()}}])&&T(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,t}();function D(e){return D="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},D(e)}function H(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,F(o.key),o)}}function F(e){var t=function(e){if("object"!=D(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var n=t.call(e,"string");if("object"!=D(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==D(t)?t:t+""}var A=function(){return e=function e(t,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._nameSelector=t,this._aboutSelector=n},(t=[{key:"getUserInfo",value:function(){return{name:this._nameSelector.textContent,about:this._aboutSelector.textContent}}},{key:"setUserInfo",value:function(e){var t=e.name,n=e.about;this._nameSelector.textContent=t,this._aboutSelector.textContent=n}}])&&H(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,t}(),R=document.querySelector("#btnedit"),V=document.querySelector("#btnadd"),W=document.querySelector("#form__edit"),Y=document.querySelector("#form__add"),Z=document.querySelector("#name"),z=document.querySelector("#about"),N=document.querySelector(".popup-content-profile"),G=document.querySelector(".nav__profile-nombre"),U=document.querySelector(".nav__profile-about"),J=document.querySelector(".popup-content-add-card"),X=document.querySelector(".elements"),K=document.querySelector(".popup-content-imagen"),Q=[{name:"Chicago",link:"https://images.unsplash.com/photo-1596250410216-1ac77dc208e3?w=500&auto=format&fit=crop&q=60&ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxzZWFyY2h8N3x8Y2hpY2Fnb3xlbnwwfHwwfHx8MA%3D%3D"},{name:"New York",link:"https://images.unsplash.com/photo-1541336032412-2048a678540d?w=500&auto=format&fit=crop&q=60&ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxzZWFyY2h8MTh8fG51ZXZhJTIweW9ya3xlbnwwfHwwfHx8MA%3D%3D"},{name:"Brooklyn",link:"https://images.unsplash.com/photo-1562809878-e7b278388ab5?w=500&auto=format&fit=crop&q=60&ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxzZWFyY2h8MTF8fGJyb29reWxufGVufDB8fDB8fHww"},{name:"Las Vegas",link:"https://images.unsplash.com/photo-1577334928618-2ff2bf09e827?w=500&auto=format&fit=crop&q=60&ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxzZWFyY2h8NHx8bGFzJTIwdmVnYXN8ZW58MHx8MHx8fDA%3D"},{name:"Texas",link:"https://plus.unsplash.com/premium_photo-1690522330262-5bdf16b17e26?w=500&auto=format&fit=crop&q=60&ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxzZWFyY2h8MTN8fHRleGFzfGVufDB8fDB8fHww"},{name:"Nebraska",link:"https://images.unsplash.com/photo-1574189937485-b94ae177a5fb?w=500&auto=format&fit=crop&q=60&ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxzZWFyY2h8NHx8bmVicmFza2F8ZW58MHx8MHx8fDA%3D"}],$=new I(B,W),ee=new I(B,Y),te=new s(N),ne=new s(J),oe=new w(K),re=new A(G,U),ie=new w(K),ue=new L(Y,(function(e){Q.push({name:e.place,link:e.link});var t=new o({name:e.place,link:e.link},".template-cards",ce).generateCard();X.prepend(t)})),le=new l({items:Q,renderer:function(e){var t=new o(e,".template-cards",ce).generateCard();le.addItem(t)}},X);function ce(e,t){ie.open(e,t)}le.renderItems(),ue.setEventListeners(),te.setEventListeners(),ne.setEventListeners(),oe.setEventListeners(),R.addEventListener("click",(function(){Z.value=re.getUserInfo().name,z.value=re.getUserInfo().about,$.enableValidation(),te.open()})),V.addEventListener("click",(function(){ee.enableValidation(),ne.open()})),W.addEventListener("submit",(function(e){e.preventDefault();var t=Z.value,n=z.value;re.setUserInfo({name:t,about:n}),N.classList.remove("popup__opened")}))}();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoibWFpbi5qcyIsIm1hcHBpbmdzIjoiMnJCQUFPLElBQU1BLEVBQUksV0FNZCxPLEVBTEQsU0FBQUEsRUFBWUMsRUFBTUMsRUFBY0MsSSw0RkFBaUJDLENBQUEsS0FBQUosR0FDL0NLLEtBQUtDLE1BQVFMLEVBQUtNLEtBQ2xCRixLQUFLRyxNQUFRUCxFQUFLUSxLQUNsQkosS0FBS0ssY0FBZ0JSLEVBQ3JCRyxLQUFLTSxpQkFBbUJSLENBQzFCLEcsRUFBQyxFQUFBUyxJQUFBLGVBQUFDLE1BQ0QsV0FLRSxPQUpvQkMsU0FDakJDLGNBQWNWLEtBQUtLLGVBQ25CTSxRQUFRRCxjQUFjLFlBQ3RCRSxXQUFVLEVBRWYsR0FBQyxDQUFBTCxJQUFBLGVBQUFDLE1BQ0QsV0FBZSxJQUFBSyxFQUFBLEtBMkJiLE9BekJBYixLQUFLYyxTQUFXZCxLQUFLZSxlQUNyQmYsS0FBS2MsU0FBU0osY0FBYyxtQkFBbUJNLFlBQWNoQixLQUFLQyxNQUNsRUQsS0FBS2MsU0FBU0osY0FBYyxvQkFBb0JPLElBQU1qQixLQUFLRyxNQUMzREgsS0FBS2MsU0FBU0osY0FDWixvQkFDQVEsSUFBTSxhQUFIQyxPQUFnQm5CLEtBQUtDLE9BRTFCRCxLQUFLYyxTQUNGSixjQUFjLHVCQUNkVSxpQkFBaUIsU0FBUyxTQUFVQyxHQUNuQ0EsRUFBSUMsT0FBT0MsVUFBVUMsT0FBTyw0QkFDOUIsSUFFRnhCLEtBQUtjLFNBQ0ZKLGNBQWMseUJBQ2RVLGlCQUFpQixTQUFTLFNBQVVDLEdBQ25DQSxFQUFJQyxPQUFPRyxRQUFRLFlBQVlDLFFBQ2pDLElBRUYxQixLQUFLYyxTQUNGSixjQUFjLHlCQUNkVSxpQkFBaUIsU0FBUyxXQUN6QlAsRUFBS1AsaUJBQWlCTyxFQUFLVixNQUFPVSxFQUFLWixNQUN6QyxJQUVLRCxLQUFLYyxRQUNkLE0sNkVBQUMsQ0ExQ2MsRyxrcUJDQVYsSUFBTWEsRUFBTyxXQUtqQixPLEVBSkQsU0FBQUEsRUFBQUMsRUFBaUNDLEdBQW1CLElBQXRDQyxFQUFLRixFQUFMRSxNQUFPQyxFQUFRSCxFQUFSRyxVLDRGQUFRaEMsQ0FBQSxLQUFBNEIsR0FDM0IzQixLQUFLZ0MsY0FBZ0JGLEVBQ3JCOUIsS0FBS2lDLFVBQVlGLEVBQ2pCL0IsS0FBS2tDLFdBQWFMLENBQ3BCLEcsRUFBQyxFQUFBdEIsSUFBQSxjQUFBQyxNQUNELFdBQWMsSUFBQUssRUFBQSxLQUNaYixLQUFLZ0MsY0FBY0csU0FBUSxTQUFDQyxHQUMxQnZCLEVBQUtvQixVQUFVRyxFQUNqQixHQUNGLEdBQUMsQ0FBQTdCLElBQUEsVUFBQUMsTUFDRCxTQUFRNkIsR0FDTnJDLEtBQUtrQyxXQUFXSSxPQUFPRCxFQUN6QixNLDZFQUFDLENBYmlCLEcsa3FCQ0FiLElBQU1FLEVBQUssV0FVZixPLEVBVEQsU0FBQUEsRUFBWUMsSSw0RkFBZXpDLENBQUEsS0FBQXdDLEdBQ3pCdkMsS0FBS3lDLGVBQWlCRCxFQUN0QnhDLEtBQUswQyxvQkFBc0IxQyxLQUFLeUMsZUFBZS9CLGNBQWMsWUFDN0RWLEtBQUsyQyxxQkFBdUIzQyxLQUFLeUMsZUFBZS9CLGNBQzlDLHdCQUVGVixLQUFLNEMsaUJBQW1CNUMsS0FBS3lDLGVBQWUvQixjQUFjLFFBQzFEVixLQUFLNkMsa0JBQ0g3QyxLQUFLeUMsZUFBZS9CLGNBQWMsb0JBQ3RDLEcsRUFBQyxFQUFBSCxJQUFBLE9BQUFDLE1BQ0QsV0FDRVIsS0FBS3lDLGVBQWVsQixVQUFVdUIsSUFBSSxnQkFDcEMsR0FBQyxDQUFBdkMsSUFBQSxRQUFBQyxNQUNELFdBQ0VSLEtBQUt5QyxlQUFlbEIsVUFBVUcsT0FBTyxnQkFDdkMsR0FBQyxDQUFBbkIsSUFBQSxrQkFBQUMsTUFDRCxTQUFnQnVDLEdBQ0ksV0FBZEEsRUFBTXhDLEtBQ1JQLEtBQUtnRCxPQUVULEdBQUMsQ0FBQXpDLElBQUEsb0JBQUFDLE1BQ0QsV0FBb0IsSUFBQUssRUFBQSxLQUNkYixLQUFLMEMscUJBQ1AxQyxLQUFLMEMsb0JBQW9CdEIsaUJBQWlCLFNBQVMsV0FDakRQLEVBQUttQyxPQUNQLElBRUVoRCxLQUFLMkMsc0JBQ1AzQyxLQUFLMkMscUJBQXFCdkIsaUJBQWlCLFNBQVMsV0FDbERQLEVBQUttQyxPQUNQLElBRUVoRCxLQUFLNEMsa0JBQ1A1QyxLQUFLNEMsaUJBQWlCeEIsaUJBQWlCLFNBQVMsV0FDOUNQLEVBQUttQyxPQUNQLElBRUVoRCxLQUFLNkMsbUJBQ1A3QyxLQUFLNkMsa0JBQWtCekIsaUJBQWlCLFNBQVMsV0FDL0NQLEVBQUttQyxPQUNQLElBRUZ2QyxTQUFTVyxpQkFBaUIsV0FBVyxTQUFDMkIsR0FDcENsQyxFQUFLb0MsZ0JBQWdCRixFQUN2QixJQUNBdEMsU0FBU3lDLG9CQUFvQixXQUFXLFNBQUNILEdBQ3ZDbEMsRUFBS29DLGdCQUFnQkYsRUFDdkIsR0FDRixNLDZFQUFDLENBakRlLEcsbTNEQ0VYLElBQU1JLEVBQWMsU0FBQUMsR0FDekIsU0FBQUQsRUFBWVgsR0FBZSxJQUFBM0IsRUFTNEIsTyw0RkFUNUJkLENBQUEsS0FBQW9ELElBQ3pCdEMsRUFBQXdDLEVBQUEsS0FBQUYsRUFBQSxDQUFNWCxLQUNEYyxpQkFBbUJ6QyxFQUFLNEIsZUFBZS9CLGNBQzFDLHVCQUVGRyxFQUFLMEMsbUJBQ0gxQyxFQUFLNEIsZUFBZS9CLGNBQWMsc0JBQ3BDRyxFQUFLMkMsb0JBQXNCM0MsRUFBSzRCLGVBQWUvQixjQUFjLFdBQzdERyxFQUFLNEMsbUJBQ0g1QyxFQUFLNEIsZUFBZS9CLGNBQWMsaUJBQWlCRyxDQUN2RCxDQUFDLE8scVJBQUE2QyxDQUFBUCxFQUFBQyxHLEVBQUFELEcsRUFBQSxFQUFBNUMsSUFBQSxrQkFBQUMsTUFDRCxTQUFnQnVDLEdBQ2RZLEVBQUFSLEVBQUEseUJBQUFRLENBQUEsQ0FBc0JaLEdBQ3hCLEdBQUMsQ0FBQXhDLElBQUEsT0FBQUMsTUFDRCxTQUFLSixFQUFNRixHQUNURixLQUFLc0QsaUJBQWlCckMsSUFBTWIsRUFDNUJKLEtBQUt1RCxtQkFBbUJ2QyxZQUFjZCxFQUN0Q0YsS0FBS3NELGlCQUFpQnBDLElBQU0sYUFBSEMsT0FBZ0JqQixHQUN6Q3lELEVBQUFSLEVBQUEsY0FBQVEsQ0FBQSxHQUNGLEdBQUMsQ0FBQXBELElBQUEsUUFBQUMsTUFDRCxXQUNFbUQsRUFBQVIsRUFBQSxlQUFBUSxDQUFBLEdBQ0YsR0FBQyxDQUFBcEQsSUFBQSxvQkFBQUMsTUFDRCxXQUFvQixJQUFBb0QsRUFBQSxLQUNkNUQsS0FBS3dELHFCQUNQeEQsS0FBS3dELG9CQUFvQnBDLGlCQUFpQixTQUFTLFdBQ2pEd0MsRUFBS1osT0FDUCxJQUVFaEQsS0FBS3lELG9CQUNQekQsS0FBS3lELG1CQUFtQnJDLGlCQUFpQixTQUFTLFdBQ2hEd0MsRUFBS1osT0FDUCxJQUVGdkMsU0FBU1csaUJBQWlCLFdBQVcsU0FBQzJCLEdBQ3BDYSxFQUFLWCxnQkFBZ0JGLEVBQ3ZCLElBQ0F0QyxTQUFTeUMsb0JBQW9CLFdBQVcsU0FBQ0gsR0FDdkNhLEVBQUtYLGdCQUFnQkYsRUFDdkIsR0FDRixNLDZFQUFDLENBekN3QixDQUFTUixHLHl2RENEN0IsSUFBTXNCLEVBQWEsU0FBQVQsR0FDeEIsU0FBQVMsRUFBWXJCLEVBQWVzQixHQUFrQixJQUFBakQsRUFNekMsTyw0RkFOeUNkLENBQUEsS0FBQThELElBQzNDaEQsRUFBQXdDLEVBQUEsS0FBQVEsRUFBQSxDQUFNckIsS0FDRHVCLGtCQUFvQkQsRUFDekJqRCxFQUFLbUQsV0FBYW5ELEVBQUs0QixlQUFld0IsaUJBQWlCLGdCQUN2RHBELEVBQUtxRCxzQkFBd0JyRCxFQUFLNEIsZUFBZWhCLFFBQy9DLDJCQUNBWixDQUNKLENBQUMsTyxxUkFBQTZDLENBQUFHLEVBQUFULEcsRUFBQVMsRSxFQUFBLEVBQUF0RCxJQUFBLFFBQUFDLE1BRUQsV0FDRVIsS0FBS2tFLHNCQUFzQjNDLFVBQVVHLE9BQU8saUJBQzVDMUIsS0FBS3lDLGVBQWUwQixPQUN0QixHQUFDLENBQUE1RCxJQUFBLGtCQUFBQyxNQUNELFdBQ0UsSUFBTTRELEVBQWEsQ0FBQyxFQUtwQixPQUpBcEUsS0FBS2dFLFdBQVc3QixTQUFRLFNBQUNrQyxHQUN2QkQsRUFBV0MsRUFBTUMsSUFBTUQsRUFBTTdELEtBQy9CLElBQ0ErRCxRQUFRQyxJQUFJLDBCQUEyQkosR0FDaENBLENBQ1QsR0FBQyxDQUFBN0QsSUFBQSxvQkFBQUMsTUFDRCxXQUFvQixJLE1BQUFvRCxFQUFBLE0sRUFDbEJDLEUsRUFBQSxLLDJCQUFBLEUsZUFBQSxvQix3Q0FBQSxJQUNBN0QsS0FBS3lDLGVBQWVyQixpQkFBaUIsVUFBVSxTQUFDMkIsR0FDOUNBLEVBQU0wQixpQkFDTmIsRUFBS0csa0JBQWtCSCxFQUFLYyxtQkFDNUJkLEVBQUtaLE9BQ1AsR0FDRixJLGdGQUFDLENBN0J1QixDQUFTVCxHLGtxQkNENUIsSUFBTW9DLEVBQVEsQ0FDbkJDLGNBQWUsZUFDZkMscUJBQXNCLGtCQUN0QkMsb0JBQXFCLDJCQUdWQyxFQUFhLFdBVXZCLE8sRUFURCxTQUFBQSxFQUFZSixFQUFPSyxJLDRGQUFhakYsQ0FBQSxLQUFBZ0YsR0FDOUIvRSxLQUFLaUYsT0FBU04sRUFDZDNFLEtBQUtrRixhQUFlRixFQUNwQmhGLEtBQUtnRSxXQUFhbUIsTUFBTUMsS0FDdEJwRixLQUFLa0YsYUFBYWpCLGlCQUFpQmpFLEtBQUtpRixPQUFPTCxnQkFFakQ1RSxLQUFLcUYsZUFBaUJyRixLQUFLa0YsYUFBYXhFLGNBQ3RDVixLQUFLaUYsT0FBT0oscUJBRWhCLEcsRUFBQyxFQUFBdEUsSUFBQSxtQkFBQUMsTUFDRCxXQUNFLE9BQU9SLEtBQUtnRSxXQUFXc0IsTUFBSyxTQUFDQyxHQUMzQixPQUFRQSxFQUFhQyxTQUFTQyxLQUNoQyxHQUNGLEdBQUMsQ0FBQWxGLElBQUEscUJBQUFDLE1BQ0QsV0FDTVIsS0FBSzBGLG9CQUNQMUYsS0FBS3FGLGVBQWU5RCxVQUFVdUIsSUFBSTlDLEtBQUtpRixPQUFPSCxxQkFDOUM5RSxLQUFLcUYsZUFBZU0sVUFBVyxJQUUvQjNGLEtBQUtxRixlQUFlOUQsVUFBVUcsT0FBTzFCLEtBQUtpRixPQUFPSCxxQkFDakQ5RSxLQUFLcUYsZUFBZU0sVUFBVyxFQUVuQyxHQUFDLENBQUFwRixJQUFBLG1CQUFBQyxNQUNELFdBQW1CLElBQUFLLEVBQUEsS0FDakJiLEtBQUtnRSxXQUFXN0IsU0FBUSxTQUFDb0QsR0FDdkJBLEVBQWFuRSxpQkFBaUIsU0FBUyxXQUNyQ1AsRUFBSytFLG9CQUNQLEdBQ0YsSUFDQTVGLEtBQUs0RixvQkFDUCxNLDZFQUFDLENBaEN1QixHLGtxQkNObkIsSUFBTUMsRUFBUSxXQUlsQixPLEVBSEQsU0FBQUEsRUFBWUMsRUFBY0MsSSw0RkFBZWhHLENBQUEsS0FBQThGLEdBQ3ZDN0YsS0FBS2dHLGNBQWdCRixFQUNyQjlGLEtBQUtpRyxlQUFpQkYsQ0FDeEIsRyxFQUFDLEVBQUF4RixJQUFBLGNBQUFDLE1BQ0QsV0FDRSxNQUFPLENBQ0xOLEtBQU1GLEtBQUtnRyxjQUFjaEYsWUFDekJrRixNQUFPbEcsS0FBS2lHLGVBQWVqRixZQUUvQixHQUFDLENBQUFULElBQUEsY0FBQUMsTUFDRCxTQUFXb0IsR0FBa0IsSUFBZjFCLEVBQUkwQixFQUFKMUIsS0FBTWdHLEVBQUt0RSxFQUFMc0UsTUFDbEJsRyxLQUFLZ0csY0FBY2hGLFlBQWNkLEVBQ2pDRixLQUFLaUcsZUFBZWpGLFlBQWNrRixDQUNwQyxNLDZFQUFDLENBZGtCLEdDVWZDLEVBQXdCMUYsU0FBU0MsY0FBYyxZQUMvQzBGLEVBQW9CM0YsU0FBU0MsY0FBYyxXQUM3Q3NFLEVBQWN2RSxTQUFTQyxjQUFjLGVBQ3JDMkYsRUFBVzVGLFNBQVNDLGNBQWMsY0FDaEM0RixFQUFjN0YsU0FBU0MsY0FBYyxTQUNyQzZGLEVBQWU5RixTQUFTQyxjQUFjLFVBQ3RDOEYsRUFBZS9GLFNBQVNDLGNBQWMsMEJBQ3RDK0YsRUFBY2hHLFNBQVNDLGNBQWMsd0JBQ3JDZ0csRUFBY2pHLFNBQVNDLGNBQWMsdUJBQ3JDaUcsRUFBZWxHLFNBQVNDLGNBQWMsMkJBQ3RDa0csRUFBV25HLFNBQVNDLGNBQWMsYUFDbENtRyxFQUFxQnBHLFNBQVNDLGNBQWMseUJBQzVDb0csRUFBZSxDQUNuQixDQUNFNUcsS0FBTSxVQUNORSxLQUFNLGlMQUVSLENBQ0VGLEtBQU0sV0FDTkUsS0FBTSx5TEFFUixDQUNFRixLQUFNLFdBQ05FLEtBQU0sMEtBRVIsQ0FDRUYsS0FBTSxZQUNORSxLQUFNLG1MQUVSLENBQ0VGLEtBQU0sUUFDTkUsS0FBTSwrS0FFUixDQUNFRixLQUFNLFdBQ05FLEtBQU0sZ0xBR0oyRyxFQUF5QixJQUFJaEMsRUFBY0osRUFBT0ssR0FDbERnQyxHQUF3QixJQUFJakMsRUFBY0osRUFBTzBCLEdBQ2pEWSxHQUFlLElBQUkxRSxFQUFNaUUsR0FDekJVLEdBQVksSUFBSTNFLEVBQU1vRSxHQUN0QlEsR0FBYSxJQUFJaEUsRUFBZTBELEdBQ2hDTyxHQUFXLElBQUl2QixFQUFTWSxFQUFhQyxHQUNyQ1csR0FBaUIsSUFBSWxFLEVBQWUwRCxHQUNwQ1MsR0FBYSxJQUFJekQsRUFBY3dDLEdBNkJyQyxTQUE4QmtCLEdBQzVCVCxFQUFhVSxLQUFLLENBQ2hCdEgsS0FBTXFILEVBQVNFLE1BQ2ZySCxLQUFNbUgsRUFBU25ILE9BRWpCLElBUU1zSCxFQVJVLElBQUkvSCxFQUNsQixDQUNFTyxLQUFNcUgsRUFBU0UsTUFDZnJILEtBQU1tSCxFQUFTbkgsTUFFakIsa0JBQ0FOLElBRXdCNkgsZUFDMUJmLEVBQVNnQixRQUFRRixFQUNuQixJQTNDTUcsR0FBWSxJQUFJbEcsRUFDcEIsQ0FDRUcsTUFBT2dGLEVBQ1AvRSxTQUFVLFNBQUMrRixHQUNULElBQ01DLEVBRE8sSUFBSXBJLEVBQUttSSxFQUFVLGtCQUFtQmhJLElBQ3ZCNkgsZUFDNUJFLEdBQVVHLFFBQVFELEVBQ3BCLEdBRUZuQixHQUlGLFNBQVM5RyxHQUFnQm1JLEVBQVFDLEdBQy9CYixHQUFlYyxLQUFLRixFQUFRQyxFQUM5QixDQTBDQUwsR0FBVU8sY0FDVmQsR0FBV2Usb0JBQ1hwQixHQUFhb0Isb0JBQ2JuQixHQUFVbUIsb0JBQ1ZsQixHQUFXa0Isb0JBRVhsQyxFQUFzQi9FLGlCQUFpQixTQWxCdkMsV0FDRWtGLEVBQVk5RixNQUFRNEcsR0FBU2tCLGNBQWNwSSxLQUMzQ3FHLEVBQWEvRixNQUFRNEcsR0FBU2tCLGNBQWNwQyxNQUM1Q2EsRUFBdUJ3QixtQkFDdkJ0QixHQUFha0IsTUFDZixJQWNBL0IsRUFBa0JoRixpQkFBaUIsU0FibkMsV0FDRTRGLEdBQXNCdUIsbUJBQ3RCckIsR0FBVWlCLE1BQ1osSUFXQW5ELEVBQVk1RCxpQkFBaUIsVUFoRDdCLFNBQWlDQyxHQUMvQkEsRUFBSW9ELGlCQUNKLElBQUkrRCxFQUFVbEMsRUFBWTlGLE1BQ3RCaUksRUFBV2xDLEVBQWEvRixNQUM1QjRHLEdBQVNzQixZQUFZLENBQ25CeEksS0FBTXNJLEVBQ050QyxNQUFPdUMsSUFFVGpDLEVBQWFqRixVQUFVRyxPQUFPLGdCQUNoQyxHIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vd2ViX3Byb2plY3RfYXJvdW5kLy4vc2NyaXB0cy9DYXJkLmpzIiwid2VicGFjazovL3dlYl9wcm9qZWN0X2Fyb3VuZC8uL3NjcmlwdHMvU2VjdGlvbi5qcyIsIndlYnBhY2s6Ly93ZWJfcHJvamVjdF9hcm91bmQvLi9zY3JpcHRzL1BvcHVwLmpzIiwid2VicGFjazovL3dlYl9wcm9qZWN0X2Fyb3VuZC8uL3NjcmlwdHMvUG9wdXBXaXRoSW1hZ2UuanMiLCJ3ZWJwYWNrOi8vd2ViX3Byb2plY3RfYXJvdW5kLy4vc2NyaXB0cy9Qb3B1cFdpdGhGb3JtLmpzIiwid2VicGFjazovL3dlYl9wcm9qZWN0X2Fyb3VuZC8uL3NjcmlwdHMvRm9ybVZhbGlkYXRvci5qcyIsIndlYnBhY2s6Ly93ZWJfcHJvamVjdF9hcm91bmQvLi9zY3JpcHRzL1VzZXJJbmZvLmpzIiwid2VicGFjazovL3dlYl9wcm9qZWN0X2Fyb3VuZC8uL3NjcmlwdHMvaW5kZXguanMiXSwic291cmNlc0NvbnRlbnQiOlsiZXhwb3J0IGNsYXNzIENhcmQge1xuICBjb25zdHJ1Y3RvcihkYXRhLCBjYXJkU2VsZWN0b3IsIGhhbmRsZUNhcmRDbGljaykge1xuICAgIHRoaXMuX25hbWUgPSBkYXRhLm5hbWU7XG4gICAgdGhpcy5fbGluayA9IGRhdGEubGluaztcbiAgICB0aGlzLl9jYXJkU2VsZWN0b3IgPSBjYXJkU2VsZWN0b3I7XG4gICAgdGhpcy5faGFuZGxlQ2FyZENsaWNrID0gaGFuZGxlQ2FyZENsaWNrO1xuICB9XG4gIF9nZXRUZW1wbGF0ZSgpIHtcbiAgICBjb25zdCBjYXJkRWxlbWVudCA9IGRvY3VtZW50XG4gICAgICAucXVlcnlTZWxlY3Rvcih0aGlzLl9jYXJkU2VsZWN0b3IpXG4gICAgICAuY29udGVudC5xdWVyeVNlbGVjdG9yKFwiLmVsZW1lbnRcIilcbiAgICAgIC5jbG9uZU5vZGUodHJ1ZSk7XG4gICAgcmV0dXJuIGNhcmRFbGVtZW50O1xuICB9XG4gIGdlbmVyYXRlQ2FyZCgpIHtcbiAgICAvLyBBbG1hY2VuYXIgZWwgbWFyY2FkbyBlbiBlbCBjYW1wbyBwcml2YWRvIF9lbGVtZW50IHBhcmEgcXVlIG90cm9zIGVsZW1lbnRvcyBwdWVkYW4gYWNjZWRlciBhIMOpbFxuICAgIHRoaXMuX2VsZW1lbnQgPSB0aGlzLl9nZXRUZW1wbGF0ZSgpO1xuICAgIHRoaXMuX2VsZW1lbnQucXVlcnlTZWxlY3RvcihcIi5lbGVtZW50X190aXRsZVwiKS50ZXh0Q29udGVudCA9IHRoaXMuX25hbWU7XG4gICAgdGhpcy5fZWxlbWVudC5xdWVyeVNlbGVjdG9yKFwiLmVsZW1lbnRfX2ltYWdlblwiKS5zcmMgPSB0aGlzLl9saW5rO1xuICAgIHRoaXMuX2VsZW1lbnQucXVlcnlTZWxlY3RvcihcbiAgICAgIFwiLmVsZW1lbnRfX2ltYWdlblwiXG4gICAgKS5hbHQgPSBgSW1hZ2VuIGRlICR7dGhpcy5fbmFtZX1gO1xuICAgIC8vIEJ1dHR0b24gbGlrZVxuICAgIHRoaXMuX2VsZW1lbnRcbiAgICAgIC5xdWVyeVNlbGVjdG9yKFwiLmVsZW1lbnRfX2ljb24tbGlrZVwiKVxuICAgICAgLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCBmdW5jdGlvbiAoZXZ0KSB7XG4gICAgICAgIGV2dC50YXJnZXQuY2xhc3NMaXN0LnRvZ2dsZShcImVsZW1lbnRfX2ljb24tbGlrZV9hY3RpdmVcIik7XG4gICAgICB9KTtcbiAgICAvLyBCdXR0b24gZGVsZXRlXG4gICAgdGhpcy5fZWxlbWVudFxuICAgICAgLnF1ZXJ5U2VsZWN0b3IoXCIuZWxlbWVudF9faWNvbi1kZWxldGVcIilcbiAgICAgIC5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgZnVuY3Rpb24gKGV2dCkge1xuICAgICAgICBldnQudGFyZ2V0LmNsb3Nlc3QoXCIuZWxlbWVudFwiKS5yZW1vdmUoKTtcbiAgICAgIH0pO1xuICAgIC8vIE9wZW4gcG9wdXAgaW1hZ2VcbiAgICB0aGlzLl9lbGVtZW50XG4gICAgICAucXVlcnlTZWxlY3RvcihcIi5lbGVtZW50X19wb3B1cC1pbWFnZVwiKVxuICAgICAgLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB7XG4gICAgICAgIHRoaXMuX2hhbmRsZUNhcmRDbGljayh0aGlzLl9saW5rLCB0aGlzLl9uYW1lKTtcbiAgICAgIH0pO1xuXG4gICAgcmV0dXJuIHRoaXMuX2VsZW1lbnQ7XG4gIH1cbn1cbiIsImV4cG9ydCBjbGFzcyBTZWN0aW9uIHtcbiAgY29uc3RydWN0b3IoeyBpdGVtcywgcmVuZGVyZXIgfSwgY29udGFpbmVyU2VsZWN0b3IpIHtcbiAgICB0aGlzLl9pbml0aWFsQXJyYXkgPSBpdGVtcztcbiAgICB0aGlzLl9yZW5kZXJlciA9IHJlbmRlcmVyO1xuICAgIHRoaXMuX2NvbnRhaW5lciA9IGNvbnRhaW5lclNlbGVjdG9yO1xuICB9XG4gIHJlbmRlckl0ZW1zKCkge1xuICAgIHRoaXMuX2luaXRpYWxBcnJheS5mb3JFYWNoKChpdGVtKSA9PiB7XG4gICAgICB0aGlzLl9yZW5kZXJlcihpdGVtKTtcbiAgICB9KTtcbiAgfVxuICBhZGRJdGVtKGVsZW1lbnQpIHtcbiAgICB0aGlzLl9jb250YWluZXIuYXBwZW5kKGVsZW1lbnQpO1xuICB9XG59XG4iLCJleHBvcnQgY2xhc3MgUG9wdXAge1xuICBjb25zdHJ1Y3Rvcihwb3B1cFNlbGVjdG9yKSB7XG4gICAgdGhpcy5fcG9wdXBTZWxlY3RvciA9IHBvcHVwU2VsZWN0b3I7XG4gICAgdGhpcy5fYnV0dG9uQ2xvc2VQcm9maWxlID0gdGhpcy5fcG9wdXBTZWxlY3Rvci5xdWVyeVNlbGVjdG9yKFwiI3Byb2ZpbGVcIik7XG4gICAgdGhpcy5fb3ZlcmxheUNsb3NlUHJvZmlsZSA9IHRoaXMuX3BvcHVwU2VsZWN0b3IucXVlcnlTZWxlY3RvcihcbiAgICAgIFwiI292ZXJsYXktZm9ybXByb2ZpbGVcIlxuICAgICk7XG4gICAgdGhpcy5fYnV0dG9uQ2xvc2VDYXJkID0gdGhpcy5fcG9wdXBTZWxlY3Rvci5xdWVyeVNlbGVjdG9yKFwiI2FkZFwiKTtcbiAgICB0aGlzLl9vdmVybGF5Q2xvc2VDYXJkID1cbiAgICAgIHRoaXMuX3BvcHVwU2VsZWN0b3IucXVlcnlTZWxlY3RvcihcIiNvdmVybGF5LWZvcm1jYXJkXCIpO1xuICB9XG4gIG9wZW4oKSB7XG4gICAgdGhpcy5fcG9wdXBTZWxlY3Rvci5jbGFzc0xpc3QuYWRkKFwicG9wdXBfX29wZW5lZFwiKTtcbiAgfVxuICBjbG9zZSgpIHtcbiAgICB0aGlzLl9wb3B1cFNlbGVjdG9yLmNsYXNzTGlzdC5yZW1vdmUoXCJwb3B1cF9fb3BlbmVkXCIpO1xuICB9XG4gIF9oYW5kbGVFc2NDbG9zZShldmVudCkge1xuICAgIGlmIChldmVudC5rZXkgPT09IFwiRXNjYXBlXCIpIHtcbiAgICAgIHRoaXMuY2xvc2UoKTtcbiAgICB9XG4gIH1cbiAgc2V0RXZlbnRMaXN0ZW5lcnMoKSB7XG4gICAgaWYgKHRoaXMuX2J1dHRvbkNsb3NlUHJvZmlsZSkge1xuICAgICAgdGhpcy5fYnV0dG9uQ2xvc2VQcm9maWxlLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB7XG4gICAgICAgIHRoaXMuY2xvc2UoKTtcbiAgICAgIH0pO1xuICAgIH1cbiAgICBpZiAodGhpcy5fb3ZlcmxheUNsb3NlUHJvZmlsZSkge1xuICAgICAgdGhpcy5fb3ZlcmxheUNsb3NlUHJvZmlsZS5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4ge1xuICAgICAgICB0aGlzLmNsb3NlKCk7XG4gICAgICB9KTtcbiAgICB9XG4gICAgaWYgKHRoaXMuX2J1dHRvbkNsb3NlQ2FyZCkge1xuICAgICAgdGhpcy5fYnV0dG9uQ2xvc2VDYXJkLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB7XG4gICAgICAgIHRoaXMuY2xvc2UoKTtcbiAgICAgIH0pO1xuICAgIH1cbiAgICBpZiAodGhpcy5fb3ZlcmxheUNsb3NlQ2FyZCkge1xuICAgICAgdGhpcy5fb3ZlcmxheUNsb3NlQ2FyZC5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4ge1xuICAgICAgICB0aGlzLmNsb3NlKCk7XG4gICAgICB9KTtcbiAgICB9XG4gICAgZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihcImtleWRvd25cIiwgKGV2ZW50KSA9PiB7XG4gICAgICB0aGlzLl9oYW5kbGVFc2NDbG9zZShldmVudCk7XG4gICAgfSk7XG4gICAgZG9jdW1lbnQucmVtb3ZlRXZlbnRMaXN0ZW5lcihcImtleWRvd25cIiwgKGV2ZW50KSA9PiB7XG4gICAgICB0aGlzLl9oYW5kbGVFc2NDbG9zZShldmVudCk7XG4gICAgfSk7XG4gIH1cbn1cbiIsImltcG9ydCB7IFBvcHVwIH0gZnJvbSBcIi4vUG9wdXAuanNcIjtcblxuZXhwb3J0IGNsYXNzIFBvcHVwV2l0aEltYWdlIGV4dGVuZHMgUG9wdXAge1xuICBjb25zdHJ1Y3Rvcihwb3B1cFNlbGVjdG9yKSB7XG4gICAgc3VwZXIocG9wdXBTZWxlY3Rvcik7XG4gICAgdGhpcy5fbGlua1BvcHVwSW1hZ2VuID0gdGhpcy5fcG9wdXBTZWxlY3Rvci5xdWVyeVNlbGVjdG9yKFxuICAgICAgXCIucG9wdXBfX2JvZHktaW1hZ2VuXCJcbiAgICApO1xuICAgIHRoaXMuX2xleWVuZGFQb3B1cFRpdGxlID1cbiAgICAgIHRoaXMuX3BvcHVwU2VsZWN0b3IucXVlcnlTZWxlY3RvcihcIi5wb3B1cF9fYm9keS10aXRsZVwiKTtcbiAgICB0aGlzLl9jbG9zZVBvcHVwQnRuSW1hZ2UgPSB0aGlzLl9wb3B1cFNlbGVjdG9yLnF1ZXJ5U2VsZWN0b3IoXCIjaW1hZ2VuXCIpO1xuICAgIHRoaXMuX2Nsb3NlUG9wdXBPdmVybGF5ID1cbiAgICAgIHRoaXMuX3BvcHVwU2VsZWN0b3IucXVlcnlTZWxlY3RvcihcIiNvdmVybGF5LWNhcmRcIik7XG4gIH1cbiAgX2hhbmRsZUVzY0Nsb3NlKGV2ZW50KSB7XG4gICAgc3VwZXIuX2hhbmRsZUVzY0Nsb3NlKGV2ZW50KTtcbiAgfVxuICBvcGVuKGxpbmssIG5hbWUpIHtcbiAgICB0aGlzLl9saW5rUG9wdXBJbWFnZW4uc3JjID0gbGluaztcbiAgICB0aGlzLl9sZXllbmRhUG9wdXBUaXRsZS50ZXh0Q29udGVudCA9IG5hbWU7XG4gICAgdGhpcy5fbGlua1BvcHVwSW1hZ2VuLmFsdCA9IGBJbWFnZW4gZGUgJHtuYW1lfWA7XG4gICAgc3VwZXIub3BlbigpO1xuICB9XG4gIGNsb3NlKCkge1xuICAgIHN1cGVyLmNsb3NlKCk7XG4gIH1cbiAgc2V0RXZlbnRMaXN0ZW5lcnMoKSB7XG4gICAgaWYgKHRoaXMuX2Nsb3NlUG9wdXBCdG5JbWFnZSkge1xuICAgICAgdGhpcy5fY2xvc2VQb3B1cEJ0bkltYWdlLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB7XG4gICAgICAgIHRoaXMuY2xvc2UoKTtcbiAgICAgIH0pO1xuICAgIH1cbiAgICBpZiAodGhpcy5fY2xvc2VQb3B1cE92ZXJsYXkpIHtcbiAgICAgIHRoaXMuX2Nsb3NlUG9wdXBPdmVybGF5LmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB7XG4gICAgICAgIHRoaXMuY2xvc2UoKTtcbiAgICAgIH0pO1xuICAgIH1cbiAgICBkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKFwia2V5ZG93blwiLCAoZXZlbnQpID0+IHtcbiAgICAgIHRoaXMuX2hhbmRsZUVzY0Nsb3NlKGV2ZW50KTtcbiAgICB9KTtcbiAgICBkb2N1bWVudC5yZW1vdmVFdmVudExpc3RlbmVyKFwia2V5ZG93blwiLCAoZXZlbnQpID0+IHtcbiAgICAgIHRoaXMuX2hhbmRsZUVzY0Nsb3NlKGV2ZW50KTtcbiAgICB9KTtcbiAgfVxufVxuIiwiaW1wb3J0IHsgUG9wdXAgfSBmcm9tIFwiLi9Qb3B1cC5qc1wiO1xuZXhwb3J0IGNsYXNzIFBvcHVwV2l0aEZvcm0gZXh0ZW5kcyBQb3B1cCB7XG4gIGNvbnN0cnVjdG9yKHBvcHVwU2VsZWN0b3IsIGhhbmRsZUZvcm1TdWJtaXQpIHtcbiAgICBzdXBlcihwb3B1cFNlbGVjdG9yKTtcbiAgICB0aGlzLl9oYW5kbGVGb3JtU3VibWl0ID0gaGFuZGxlRm9ybVN1Ym1pdDtcbiAgICB0aGlzLl9pbnB1dExpc3QgPSB0aGlzLl9wb3B1cFNlbGVjdG9yLnF1ZXJ5U2VsZWN0b3JBbGwoXCIuZm9ybV9faW5wdXRcIik7XG4gICAgdGhpcy5fY29udGVudFBvcHVwRm9ybUNhcmQgPSB0aGlzLl9wb3B1cFNlbGVjdG9yLmNsb3Nlc3QoXG4gICAgICBcIi5wb3B1cC1jb250ZW50LWFkZC1jYXJkXCJcbiAgICApO1xuICB9XG5cbiAgY2xvc2UoKSB7XG4gICAgdGhpcy5fY29udGVudFBvcHVwRm9ybUNhcmQuY2xhc3NMaXN0LnJlbW92ZShcInBvcHVwX19vcGVuZWRcIik7XG4gICAgdGhpcy5fcG9wdXBTZWxlY3Rvci5yZXNldCgpO1xuICB9XG4gIF9nZXRJbnB1dFZhbHVlcygpIHtcbiAgICBjb25zdCBmb3JtVmFsdWVzID0ge307XG4gICAgdGhpcy5faW5wdXRMaXN0LmZvckVhY2goKGlucHV0KSA9PiB7XG4gICAgICBmb3JtVmFsdWVzW2lucHV0LmlkXSA9IGlucHV0LnZhbHVlO1xuICAgIH0pO1xuICAgIGNvbnNvbGUubG9nKFwiVmFsb3JlcyBkZWwgZm9ybXVsYXJpbzpcIiwgZm9ybVZhbHVlcyk7XG4gICAgcmV0dXJuIGZvcm1WYWx1ZXM7XG4gIH1cbiAgc2V0RXZlbnRMaXN0ZW5lcnMoKSB7XG4gICAgc3VwZXIuc2V0RXZlbnRMaXN0ZW5lcnMoKTtcbiAgICB0aGlzLl9wb3B1cFNlbGVjdG9yLmFkZEV2ZW50TGlzdGVuZXIoXCJzdWJtaXRcIiwgKGV2ZW50KSA9PiB7XG4gICAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgdGhpcy5faGFuZGxlRm9ybVN1Ym1pdCh0aGlzLl9nZXRJbnB1dFZhbHVlcygpKTtcbiAgICAgIHRoaXMuY2xvc2UoKTtcbiAgICB9KTtcbiAgfVxufVxuIiwiZXhwb3J0IGNvbnN0IGZvcm1zID0ge1xuICBpbnB1dFNlbGVjdG9yOiBcIi5mb3JtX19pbnB1dFwiLFxuICBzdWJtaXRCdXR0b25TZWxlY3RvcjogXCIucG9wdXBfX2FkZC1idG5cIixcbiAgaW5hY3RpdmVCdXR0b25DbGFzczogXCJwb3B1cF9fYWRkLWJ0bl9pbmFjdGl2ZVwiLFxufTtcblxuZXhwb3J0IGNsYXNzIEZvcm1WYWxpZGF0b3Ige1xuICBjb25zdHJ1Y3Rvcihmb3JtcywgZm9ybUVsZW1lbnQpIHtcbiAgICB0aGlzLl9mb3JtcyA9IGZvcm1zO1xuICAgIHRoaXMuX2Zvcm1FbGVtZW50ID0gZm9ybUVsZW1lbnQ7XG4gICAgdGhpcy5faW5wdXRMaXN0ID0gQXJyYXkuZnJvbShcbiAgICAgIHRoaXMuX2Zvcm1FbGVtZW50LnF1ZXJ5U2VsZWN0b3JBbGwodGhpcy5fZm9ybXMuaW5wdXRTZWxlY3RvcilcbiAgICApO1xuICAgIHRoaXMuX2J1dHRvbkVsZW1lbnQgPSB0aGlzLl9mb3JtRWxlbWVudC5xdWVyeVNlbGVjdG9yKFxuICAgICAgdGhpcy5fZm9ybXMuc3VibWl0QnV0dG9uU2VsZWN0b3JcbiAgICApO1xuICB9XG4gIF9oYXNJbnZhbGlkSW5wdXQoKSB7XG4gICAgcmV0dXJuIHRoaXMuX2lucHV0TGlzdC5zb21lKChpbnB1dEVsZW1lbnQpID0+IHtcbiAgICAgIHJldHVybiAhaW5wdXRFbGVtZW50LnZhbGlkaXR5LnZhbGlkO1xuICAgIH0pO1xuICB9XG4gIF90b2dnbGVCdXR0b25TdGF0ZSgpIHtcbiAgICBpZiAodGhpcy5faGFzSW52YWxpZElucHV0KCkpIHtcbiAgICAgIHRoaXMuX2J1dHRvbkVsZW1lbnQuY2xhc3NMaXN0LmFkZCh0aGlzLl9mb3Jtcy5pbmFjdGl2ZUJ1dHRvbkNsYXNzKTtcbiAgICAgIHRoaXMuX2J1dHRvbkVsZW1lbnQuZGlzYWJsZWQgPSB0cnVlO1xuICAgIH0gZWxzZSB7XG4gICAgICB0aGlzLl9idXR0b25FbGVtZW50LmNsYXNzTGlzdC5yZW1vdmUodGhpcy5fZm9ybXMuaW5hY3RpdmVCdXR0b25DbGFzcyk7XG4gICAgICB0aGlzLl9idXR0b25FbGVtZW50LmRpc2FibGVkID0gZmFsc2U7XG4gICAgfVxuICB9XG4gIGVuYWJsZVZhbGlkYXRpb24oKSB7XG4gICAgdGhpcy5faW5wdXRMaXN0LmZvckVhY2goKGlucHV0RWxlbWVudCkgPT4ge1xuICAgICAgaW5wdXRFbGVtZW50LmFkZEV2ZW50TGlzdGVuZXIoXCJpbnB1dFwiLCAoKSA9PiB7XG4gICAgICAgIHRoaXMuX3RvZ2dsZUJ1dHRvblN0YXRlKCk7XG4gICAgICB9KTtcbiAgICB9KTtcbiAgICB0aGlzLl90b2dnbGVCdXR0b25TdGF0ZSgpO1xuICB9XG59XG4iLCJleHBvcnQgY2xhc3MgVXNlckluZm8ge1xuICBjb25zdHJ1Y3RvcihuYW1lU2VsZWN0b3IsIGFib3V0U2VsZWN0b3IpIHtcbiAgICB0aGlzLl9uYW1lU2VsZWN0b3IgPSBuYW1lU2VsZWN0b3I7XG4gICAgdGhpcy5fYWJvdXRTZWxlY3RvciA9IGFib3V0U2VsZWN0b3I7XG4gIH1cbiAgZ2V0VXNlckluZm8oKSB7XG4gICAgcmV0dXJuIHtcbiAgICAgIG5hbWU6IHRoaXMuX25hbWVTZWxlY3Rvci50ZXh0Q29udGVudCxcbiAgICAgIGFib3V0OiB0aGlzLl9hYm91dFNlbGVjdG9yLnRleHRDb250ZW50LFxuICAgIH07XG4gIH1cbiAgc2V0VXNlckluZm8oeyBuYW1lLCBhYm91dCB9KSB7XG4gICAgdGhpcy5fbmFtZVNlbGVjdG9yLnRleHRDb250ZW50ID0gbmFtZTtcbiAgICB0aGlzLl9hYm91dFNlbGVjdG9yLnRleHRDb250ZW50ID0gYWJvdXQ7XG4gIH1cbn1cbiIsIi8vSW1wb3J0YWNpb25lc1xuaW1wb3J0IFwiLi4vc3R5bGVzL2luZGV4LmNzc1wiO1xuaW1wb3J0IHsgQ2FyZCB9IGZyb20gXCIuL0NhcmQuanNcIjtcbmltcG9ydCB7IFNlY3Rpb24gfSBmcm9tIFwiLi9TZWN0aW9uLmpzXCI7XG5pbXBvcnQgeyBQb3B1cFdpdGhJbWFnZSB9IGZyb20gXCIuL1BvcHVwV2l0aEltYWdlLmpzXCI7XG5pbXBvcnQgeyBQb3B1cFdpdGhGb3JtIH0gZnJvbSBcIi4vUG9wdXBXaXRoRm9ybS5qc1wiO1xuaW1wb3J0IHsgRm9ybVZhbGlkYXRvciwgZm9ybXMgfSBmcm9tIFwiLi9Gb3JtVmFsaWRhdG9yLmpzXCI7XG5pbXBvcnQgeyBVc2VySW5mbyB9IGZyb20gXCIuL1VzZXJJbmZvLmpzXCI7XG5pbXBvcnQgeyBQb3B1cCB9IGZyb20gXCIuL1BvcHVwLmpzXCI7XG4vLyBEZWNsYXJhY2lvbiBkZSBWYXJpYWJsZXNcbmNvbnN0IGJ1dHRvbk9wZW5FZGl0UHJvZmlsZSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIjYnRuZWRpdFwiKTtcbmNvbnN0IGJ1dHRvbk9wZW5BZGRDYXJkID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIiNidG5hZGRcIik7XG5sZXQgZm9ybUVsZW1lbnQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiI2Zvcm1fX2VkaXRcIik7XG5sZXQgZm9ybUNhcmQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiI2Zvcm1fX2FkZFwiKTtcbmNvbnN0IHByb2ZpbGVOYW1lID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIiNuYW1lXCIpO1xuY29uc3QgcHJvZmlsZUFib3V0ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIiNhYm91dFwiKTtcbmNvbnN0IHBvcHVwUHJvZmlsZSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIucG9wdXAtY29udGVudC1wcm9maWxlXCIpO1xuY29uc3QgbmFtZVByb2ZpbGUgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLm5hdl9fcHJvZmlsZS1ub21icmVcIik7XG5jb25zdCBhYm91dFByb2ZpZSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIubmF2X19wcm9maWxlLWFib3V0XCIpO1xuY29uc3QgcG9wdXBBZGRDYXJkID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5wb3B1cC1jb250ZW50LWFkZC1jYXJkXCIpO1xuY29uc3QgY2FyZEFyZWEgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLmVsZW1lbnRzXCIpO1xuY29uc3QgY29udGVudFBvcHVwSW1hZ2VuID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5wb3B1cC1jb250ZW50LWltYWdlblwiKTtcbmNvbnN0IGluaXRpYWxDYXJkcyA9IFtcbiAge1xuICAgIG5hbWU6IFwiQ2hpY2Fnb1wiLFxuICAgIGxpbms6IFwiaHR0cHM6Ly9pbWFnZXMudW5zcGxhc2guY29tL3Bob3RvLTE1OTYyNTA0MTAyMTYtMWFjNzdkYzIwOGUzP3c9NTAwJmF1dG89Zm9ybWF0JmZpdD1jcm9wJnE9NjAmaXhsaWI9cmItNC4wLjMmaXhpZD1NM3d4TWpBM2ZEQjhNSHh6WldGeVkyaDhOM3g4WTJocFkyRm5iM3hsYm53d2ZId3dmSHg4TUElM0QlM0RcIixcbiAgfSxcbiAge1xuICAgIG5hbWU6IFwiTmV3IFlvcmtcIixcbiAgICBsaW5rOiBcImh0dHBzOi8vaW1hZ2VzLnVuc3BsYXNoLmNvbS9waG90by0xNTQxMzM2MDMyNDEyLTIwNDhhNjc4NTQwZD93PTUwMCZhdXRvPWZvcm1hdCZmaXQ9Y3JvcCZxPTYwJml4bGliPXJiLTQuMC4zJml4aWQ9TTN3eE1qQTNmREI4TUh4elpXRnlZMmg4TVRoOGZHNTFaWFpoSlRJd2VXOXlhM3hsYm53d2ZId3dmSHg4TUElM0QlM0RcIixcbiAgfSxcbiAge1xuICAgIG5hbWU6IFwiQnJvb2tseW5cIixcbiAgICBsaW5rOiBcImh0dHBzOi8vaW1hZ2VzLnVuc3BsYXNoLmNvbS9waG90by0xNTYyODA5ODc4LWU3YjI3ODM4OGFiNT93PTUwMCZhdXRvPWZvcm1hdCZmaXQ9Y3JvcCZxPTYwJml4bGliPXJiLTQuMC4zJml4aWQ9TTN3eE1qQTNmREI4TUh4elpXRnlZMmg4TVRGOGZHSnliMjlyZVd4dWZHVnVmREI4ZkRCOGZId3dcIixcbiAgfSxcbiAge1xuICAgIG5hbWU6IFwiTGFzIFZlZ2FzXCIsXG4gICAgbGluazogXCJodHRwczovL2ltYWdlcy51bnNwbGFzaC5jb20vcGhvdG8tMTU3NzMzNDkyODYxOC0yZmYyYmYwOWU4Mjc/dz01MDAmYXV0bz1mb3JtYXQmZml0PWNyb3AmcT02MCZpeGxpYj1yYi00LjAuMyZpeGlkPU0zd3hNakEzZkRCOE1IeHpaV0Z5WTJoOE5IeDhiR0Z6SlRJd2RtVm5ZWE44Wlc1OE1IeDhNSHg4ZkRBJTNEXCIsXG4gIH0sXG4gIHtcbiAgICBuYW1lOiBcIlRleGFzXCIsXG4gICAgbGluazogXCJodHRwczovL3BsdXMudW5zcGxhc2guY29tL3ByZW1pdW1fcGhvdG8tMTY5MDUyMjMzMDI2Mi01YmRmMTZiMTdlMjY/dz01MDAmYXV0bz1mb3JtYXQmZml0PWNyb3AmcT02MCZpeGxpYj1yYi00LjAuMyZpeGlkPU0zd3hNakEzZkRCOE1IeHpaV0Z5WTJoOE1UTjhmSFJsZUdGemZHVnVmREI4ZkRCOGZId3dcIixcbiAgfSxcbiAge1xuICAgIG5hbWU6IFwiTmVicmFza2FcIixcbiAgICBsaW5rOiBcImh0dHBzOi8vaW1hZ2VzLnVuc3BsYXNoLmNvbS9waG90by0xNTc0MTg5OTM3NDg1LWI5NGFlMTc3YTVmYj93PTUwMCZhdXRvPWZvcm1hdCZmaXQ9Y3JvcCZxPTYwJml4bGliPXJiLTQuMC4zJml4aWQ9TTN3eE1qQTNmREI4TUh4elpXRnlZMmg4Tkh4OGJtVmljbUZ6YTJGOFpXNThNSHg4TUh4OGZEQSUzRFwiLFxuICB9LFxuXTtcbmNvbnN0IGZvcm1WYWxpZGF0b3JQb3B1cEVkaXQgPSBuZXcgRm9ybVZhbGlkYXRvcihmb3JtcywgZm9ybUVsZW1lbnQpO1xuY29uc3QgZm9ybVZhbGlkYXRvclBvcHVwQWRkID0gbmV3IEZvcm1WYWxpZGF0b3IoZm9ybXMsIGZvcm1DYXJkKTtcbmNvbnN0IFBvcHVwUHJvZmlsZSA9IG5ldyBQb3B1cChwb3B1cFByb2ZpbGUpO1xuY29uc3QgUG9wdXBDYXJkID0gbmV3IFBvcHVwKHBvcHVwQWRkQ2FyZCk7XG5jb25zdCBjbG9zZVBvcHVwID0gbmV3IFBvcHVwV2l0aEltYWdlKGNvbnRlbnRQb3B1cEltYWdlbik7XG5jb25zdCB1c2VySW5mbyA9IG5ldyBVc2VySW5mbyhuYW1lUHJvZmlsZSwgYWJvdXRQcm9maWUpO1xuY29uc3QgcG9wdXBXaXRoSW1hZ2UgPSBuZXcgUG9wdXBXaXRoSW1hZ2UoY29udGVudFBvcHVwSW1hZ2VuKTtcbmNvbnN0IHN1Ym1pdENhcmQgPSBuZXcgUG9wdXBXaXRoRm9ybShmb3JtQ2FyZCwgaGFuZGxlQ2FyZEZvcm1TdWJtaXQpO1xuY29uc3QgY2FyZHNMaXN0ID0gbmV3IFNlY3Rpb24oXG4gIHtcbiAgICBpdGVtczogaW5pdGlhbENhcmRzLFxuICAgIHJlbmRlcmVyOiAoY2FyZEl0ZW0pID0+IHtcbiAgICAgIGNvbnN0IGNhcmQgPSBuZXcgQ2FyZChjYXJkSXRlbSwgXCIudGVtcGxhdGUtY2FyZHNcIiwgaGFuZGxlQ2FyZENsaWNrKTtcbiAgICAgIGNvbnN0IGNhcmROZXdFbGVtZW50ID0gY2FyZC5nZW5lcmF0ZUNhcmQoKTtcbiAgICAgIGNhcmRzTGlzdC5hZGRJdGVtKGNhcmROZXdFbGVtZW50KTtcbiAgICB9LFxuICB9LFxuICBjYXJkQXJlYVxuKTtcblxuLy9GdW5jaW9uZXNcbmZ1bmN0aW9uIGhhbmRsZUNhcmRDbGljayhpbWFnZW4sIHRpdGxlKSB7XG4gIHBvcHVwV2l0aEltYWdlLm9wZW4oaW1hZ2VuLCB0aXRsZSk7XG59XG5cbmZ1bmN0aW9uIGhhbmRsZVByb2ZpbGVGb3JtU3VibWl0KGV2dCkge1xuICBldnQucHJldmVudERlZmF1bHQoKTtcbiAgbGV0IHNldG5hbWUgPSBwcm9maWxlTmFtZS52YWx1ZTtcbiAgbGV0IHNldGFib3V0ID0gcHJvZmlsZUFib3V0LnZhbHVlO1xuICB1c2VySW5mby5zZXRVc2VySW5mbyh7XG4gICAgbmFtZTogc2V0bmFtZSxcbiAgICBhYm91dDogc2V0YWJvdXQsXG4gIH0pO1xuICBwb3B1cFByb2ZpbGUuY2xhc3NMaXN0LnJlbW92ZShcInBvcHVwX19vcGVuZWRcIik7XG59XG5cbmZ1bmN0aW9uIGhhbmRsZUNhcmRGb3JtU3VibWl0KGZvcm1EYXRhKSB7XG4gIGluaXRpYWxDYXJkcy5wdXNoKHtcbiAgICBuYW1lOiBmb3JtRGF0YS5wbGFjZSxcbiAgICBsaW5rOiBmb3JtRGF0YS5saW5rLFxuICB9KTtcbiAgY29uc3QgbmV3Q2FyZCA9IG5ldyBDYXJkKFxuICAgIHtcbiAgICAgIG5hbWU6IGZvcm1EYXRhLnBsYWNlLFxuICAgICAgbGluazogZm9ybURhdGEubGluayxcbiAgICB9LFxuICAgIFwiLnRlbXBsYXRlLWNhcmRzXCIsXG4gICAgaGFuZGxlQ2FyZENsaWNrXG4gICk7XG4gIGNvbnN0IGNhcmRUb0FkZCA9IG5ld0NhcmQuZ2VuZXJhdGVDYXJkKCk7XG4gIGNhcmRBcmVhLnByZXBlbmQoY2FyZFRvQWRkKTtcbn1cblxuZnVuY3Rpb24gcG9wdXBfX29wZW5fZWRpdCgpIHtcbiAgcHJvZmlsZU5hbWUudmFsdWUgPSB1c2VySW5mby5nZXRVc2VySW5mbygpLm5hbWU7XG4gIHByb2ZpbGVBYm91dC52YWx1ZSA9IHVzZXJJbmZvLmdldFVzZXJJbmZvKCkuYWJvdXQ7XG4gIGZvcm1WYWxpZGF0b3JQb3B1cEVkaXQuZW5hYmxlVmFsaWRhdGlvbigpO1xuICBQb3B1cFByb2ZpbGUub3BlbigpO1xufVxuZnVuY3Rpb24gcG9wdXBfX29wZW5fYWRkKCkge1xuICBmb3JtVmFsaWRhdG9yUG9wdXBBZGQuZW5hYmxlVmFsaWRhdGlvbigpO1xuICBQb3B1cENhcmQub3BlbigpO1xufVxuXG4vL0V2ZW50b3MgeSBsaXN0YVxuY2FyZHNMaXN0LnJlbmRlckl0ZW1zKCk7XG5zdWJtaXRDYXJkLnNldEV2ZW50TGlzdGVuZXJzKCk7XG5Qb3B1cFByb2ZpbGUuc2V0RXZlbnRMaXN0ZW5lcnMoKTtcblBvcHVwQ2FyZC5zZXRFdmVudExpc3RlbmVycygpO1xuY2xvc2VQb3B1cC5zZXRFdmVudExpc3RlbmVycygpO1xuXG5idXR0b25PcGVuRWRpdFByb2ZpbGUuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIHBvcHVwX19vcGVuX2VkaXQpO1xuYnV0dG9uT3BlbkFkZENhcmQuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIHBvcHVwX19vcGVuX2FkZCk7XG5mb3JtRWxlbWVudC5hZGRFdmVudExpc3RlbmVyKFwic3VibWl0XCIsIGhhbmRsZVByb2ZpbGVGb3JtU3VibWl0KTtcbiJdLCJuYW1lcyI6WyJDYXJkIiwiZGF0YSIsImNhcmRTZWxlY3RvciIsImhhbmRsZUNhcmRDbGljayIsIl9jbGFzc0NhbGxDaGVjayIsInRoaXMiLCJfbmFtZSIsIm5hbWUiLCJfbGluayIsImxpbmsiLCJfY2FyZFNlbGVjdG9yIiwiX2hhbmRsZUNhcmRDbGljayIsImtleSIsInZhbHVlIiwiZG9jdW1lbnQiLCJxdWVyeVNlbGVjdG9yIiwiY29udGVudCIsImNsb25lTm9kZSIsIl90aGlzIiwiX2VsZW1lbnQiLCJfZ2V0VGVtcGxhdGUiLCJ0ZXh0Q29udGVudCIsInNyYyIsImFsdCIsImNvbmNhdCIsImFkZEV2ZW50TGlzdGVuZXIiLCJldnQiLCJ0YXJnZXQiLCJjbGFzc0xpc3QiLCJ0b2dnbGUiLCJjbG9zZXN0IiwicmVtb3ZlIiwiU2VjdGlvbiIsIl9yZWYiLCJjb250YWluZXJTZWxlY3RvciIsIml0ZW1zIiwicmVuZGVyZXIiLCJfaW5pdGlhbEFycmF5IiwiX3JlbmRlcmVyIiwiX2NvbnRhaW5lciIsImZvckVhY2giLCJpdGVtIiwiZWxlbWVudCIsImFwcGVuZCIsIlBvcHVwIiwicG9wdXBTZWxlY3RvciIsIl9wb3B1cFNlbGVjdG9yIiwiX2J1dHRvbkNsb3NlUHJvZmlsZSIsIl9vdmVybGF5Q2xvc2VQcm9maWxlIiwiX2J1dHRvbkNsb3NlQ2FyZCIsIl9vdmVybGF5Q2xvc2VDYXJkIiwiYWRkIiwiZXZlbnQiLCJjbG9zZSIsIl9oYW5kbGVFc2NDbG9zZSIsInJlbW92ZUV2ZW50TGlzdGVuZXIiLCJQb3B1cFdpdGhJbWFnZSIsIl9Qb3B1cCIsIl9jYWxsU3VwZXIiLCJfbGlua1BvcHVwSW1hZ2VuIiwiX2xleWVuZGFQb3B1cFRpdGxlIiwiX2Nsb3NlUG9wdXBCdG5JbWFnZSIsIl9jbG9zZVBvcHVwT3ZlcmxheSIsIl9pbmhlcml0cyIsIl9zdXBlclByb3BHZXQiLCJfdGhpczIiLCJQb3B1cFdpdGhGb3JtIiwiaGFuZGxlRm9ybVN1Ym1pdCIsIl9oYW5kbGVGb3JtU3VibWl0IiwiX2lucHV0TGlzdCIsInF1ZXJ5U2VsZWN0b3JBbGwiLCJfY29udGVudFBvcHVwRm9ybUNhcmQiLCJyZXNldCIsImZvcm1WYWx1ZXMiLCJpbnB1dCIsImlkIiwiY29uc29sZSIsImxvZyIsInByZXZlbnREZWZhdWx0IiwiX2dldElucHV0VmFsdWVzIiwiZm9ybXMiLCJpbnB1dFNlbGVjdG9yIiwic3VibWl0QnV0dG9uU2VsZWN0b3IiLCJpbmFjdGl2ZUJ1dHRvbkNsYXNzIiwiRm9ybVZhbGlkYXRvciIsImZvcm1FbGVtZW50IiwiX2Zvcm1zIiwiX2Zvcm1FbGVtZW50IiwiQXJyYXkiLCJmcm9tIiwiX2J1dHRvbkVsZW1lbnQiLCJzb21lIiwiaW5wdXRFbGVtZW50IiwidmFsaWRpdHkiLCJ2YWxpZCIsIl9oYXNJbnZhbGlkSW5wdXQiLCJkaXNhYmxlZCIsIl90b2dnbGVCdXR0b25TdGF0ZSIsIlVzZXJJbmZvIiwibmFtZVNlbGVjdG9yIiwiYWJvdXRTZWxlY3RvciIsIl9uYW1lU2VsZWN0b3IiLCJfYWJvdXRTZWxlY3RvciIsImFib3V0IiwiYnV0dG9uT3BlbkVkaXRQcm9maWxlIiwiYnV0dG9uT3BlbkFkZENhcmQiLCJmb3JtQ2FyZCIsInByb2ZpbGVOYW1lIiwicHJvZmlsZUFib3V0IiwicG9wdXBQcm9maWxlIiwibmFtZVByb2ZpbGUiLCJhYm91dFByb2ZpZSIsInBvcHVwQWRkQ2FyZCIsImNhcmRBcmVhIiwiY29udGVudFBvcHVwSW1hZ2VuIiwiaW5pdGlhbENhcmRzIiwiZm9ybVZhbGlkYXRvclBvcHVwRWRpdCIsImZvcm1WYWxpZGF0b3JQb3B1cEFkZCIsIlBvcHVwUHJvZmlsZSIsIlBvcHVwQ2FyZCIsImNsb3NlUG9wdXAiLCJ1c2VySW5mbyIsInBvcHVwV2l0aEltYWdlIiwic3VibWl0Q2FyZCIsImZvcm1EYXRhIiwicHVzaCIsInBsYWNlIiwiY2FyZFRvQWRkIiwiZ2VuZXJhdGVDYXJkIiwicHJlcGVuZCIsImNhcmRzTGlzdCIsImNhcmRJdGVtIiwiY2FyZE5ld0VsZW1lbnQiLCJhZGRJdGVtIiwiaW1hZ2VuIiwidGl0bGUiLCJvcGVuIiwicmVuZGVySXRlbXMiLCJzZXRFdmVudExpc3RlbmVycyIsImdldFVzZXJJbmZvIiwiZW5hYmxlVmFsaWRhdGlvbiIsInNldG5hbWUiLCJzZXRhYm91dCIsInNldFVzZXJJbmZvIl0sInNvdXJjZVJvb3QiOiIifQ==